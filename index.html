<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Adventure Journal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #d2c8b6; /* A warmer, more vintage background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            padding: 2rem;
        }

        .book-container {
            width: 90vw;
            max-width: 1200px;
            height: 85vh;
            position: relative;
            perspective: 2500px; /* Increased perspective for more depth */
        }

        .book {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            transform: rotateX(10deg) rotateY(0deg); /* Slight initial tilt */
        }
        
        .book:hover {
             transform: rotateX(0deg) rotateY(0deg);
        }

        .page {
            width: 50%;
            height: 100%;
            position: absolute;
            top: 0;
            right: 0;
            transform-origin: left center;
            transition: transform 1.4s cubic-bezier(0.25, 0.1, 0.25, 1);
            transform-style: preserve-3d;
            cursor: pointer;
        }
        
        .page.flipped {
            transform: rotateY(-180deg);
        }

        .front, .back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            box-sizing: border-box;
            border: 1px solid #a9a9a9;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fdfaf3; /* Creamy page color */
        }

        .back {
            transform: rotateY(180deg);
        }
        
        /* Cover Styling */
        .cover .front, .cover .back {
             background: #4a2c2a; /* Dark leather color */
             border: 2px solid #3a1c1a;
        }
        
        .cover .front img, .cover .back img {
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }


        .page img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            padding: 1rem; /* Padding to prevent image touching edges */
        }

        .page img.loaded {
            opacity: 1;
        }

        /* Page Curvature and Shadow */
        .page:not(.flipped) .front::before,
        .page.flipped .back::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 50px;
            background: linear-gradient(to right, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0) 100%);
            pointer-events: none;
        }
        
        .page:not(.flipped) {
            box-shadow: 5px 5px 20px rgba(0,0,0,0.2);
        }


        #prev-btn, #next-btn {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0,0,0,0.5);
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            font-size: 1.5rem;
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        #prev-btn:hover, #next-btn:hover {
            background-color: rgba(0,0,0,0.7);
        }

        #prev-btn {
            left: 2rem;
        }

        #next-btn {
            right: 2rem;
        }
        
        @media (max-width: 768px) {
             body {
                padding: 0.5rem;
                align-items: center;
             }
             .book-container {
                width: 100vw;
                height: 75vh;
             }
             .page {
                width: 100%;
                left: 0;
             }
             .page.flipped {
                 transform: rotateY(-180deg) translateX(-100%);
             }
             #prev-btn, #next-btn {
                 bottom: 1.5rem;
                 top: auto;
                 transform: translateY(0);
             }
             #prev-btn { left: 1rem; }
             #next-btn { right: 1rem; }
        }
    </style>
</head>
<body>

    <div class="book-container">
        <div class="book" id="book">
            <!-- Page Element 1 -->
            <div class="page cover" style="z-index: 7;">
                <div class="front">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039270/1.png" alt="Page 1 - Cover">
                </div>
                <div class="back">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039277/2.png" alt="Page 2">
                </div>
            </div>

            <!-- Page Element 2 -->
            <div class="page" style="z-index: 6;">
                <div class="front">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039328/3.png" alt="Page 3">
                </div>
                <div class="back">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039357/4.png" alt="Page 4">
                </div>
            </div>

            <!-- Page Element 3 -->
            <div class="page" style="z-index: 5;">
                <div class="front">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039366/5.png" alt="Page 5">
                </div>
                <div class="back">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039373/6.png" alt="Page 6">
                </div>
            </div>
            
            <!-- Page Element 4 -->
            <div class="page" style="z-index: 4;">
                <div class="front">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039379/7.png" alt="Page 7">
                </div>
                <div class="back">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039384/8.png" alt="Page 8">
                </div>
            </div>

            <!-- Page Element 5 -->
            <div class="page" style="z-index: 3;">
                <div class="front">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039391/9.png" alt="Page 9">
                </div>
                <div class="back">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039397/10.png" alt="Page 10">
                </div>
            </div>

            <!-- Page Element 6 -->
            <div class="page" style="z-index: 2;">
                <div class="front">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039406/11.png" alt="Page 11">
                </div>
                <div class="back">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039412/12.png" alt="Page 12">
                </div>
            </div>
            
            <!-- Page Element 7 -->
            <div class="page cover" style="z-index: 1;">
                <div class="front">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039419/13.png" alt="Page 13">
                </div>
                <div class="back">
                    <img data-src="https://res.cloudinary.com/dqbsdtrfk/image/upload/w_800,q_auto,f_auto/v1753039428/14.png" alt="Page 14 - Back Cover">
                </div>
            </div>
        </div>
    </div>

    <button id="prev-btn">&lt;</button>
    <button id="next-btn">&gt;</button>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const book = document.getElementById('book');
            const pages = document.querySelectorAll('.page');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');

            let currentPage = 0;
            const totalPages = pages.length;
            let autoFlipInterval;

            function loadImagesForPage(pageElement) {
                if (!pageElement || pageElement.imagesLoaded) return;
                const images = pageElement.querySelectorAll('img[data-src]');
                images.forEach(img => {
                    img.onload = () => img.classList.add('loaded');
                    img.src = img.dataset.src;
                    img.removeAttribute('data-src');
                });
                pageElement.imagesLoaded = true;
            }

            function goToPage(pageNum) {
                currentPage = pageNum;
                pages.forEach((page, index) => {
                    setTimeout(() => {
                        if (index < pageNum) {
                            page.classList.add('flipped');
                            page.style.zIndex = index + 1;
                        } else {
                            page.classList.remove('flipped');
                            page.style.zIndex = totalPages - index;
                        }
                    }, 50 * Math.abs(currentPage - index));
                });
                
                loadImagesForPage(pages[currentPage]);
                loadImagesForPage(pages[currentPage - 1]);
                loadImagesForPage(pages[currentPage + 1]);

                updateButtons();
            }

            function updateButtons() {
                prevBtn.style.display = currentPage === 0 ? 'none' : 'flex';
                nextBtn.style.display = currentPage === totalPages ? 'none' : 'flex';
            }

            prevBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                if (currentPage > 0) {
                    goToPage(currentPage - 1);
                    resetAutoFlip();
                }
            });

            nextBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                if (currentPage < totalPages) {
                    goToPage(currentPage + 1);
                    resetAutoFlip();
                }
            });
            
            pages.forEach((page, index) => {
                page.addEventListener('click', () => {
                    const targetPage = page.classList.contains('flipped') ? index : index + 1;
                    goToPage(targetPage);
                    resetAutoFlip();
                });
            });

            function startAutoFlip() {
                autoFlipInterval = setInterval(() => {
                    let nextPage = currentPage + 1;
                    if (nextPage > totalPages) {
                        nextPage = 0;
                    }
                    goToPage(nextPage);
                }, 7000);
            }

            function stopAutoFlip() {
                clearInterval(autoFlipInterval);
            }
            
            function resetAutoFlip() {
                stopAutoFlip();
                startAutoFlip();
            }

            goToPage(0);
            startAutoFlip();

            window.addEventListener('resize', () => goToPage(currentPage));
        });
    </script>
</body>
</html>
